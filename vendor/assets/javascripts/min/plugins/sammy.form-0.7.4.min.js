// -- Sammy.js -- /plugins/sammy.form.js
// http://sammyjs.org
// Version: 0.7.4
// Built: 2013-01-27 13:34:12 -0500
(function(e){typeof define=="function"&&define.amd?define(["jquery","sammy"],e):(window.Sammy=window.Sammy||{}).Form=e(window.jQuery,window.Sammy)})(function(e,t){function n(t,n){return typeof n=="undefined"?"":(e.isFunction(n)&&(n=n.apply(t)),n.toString())}function r(t,r,i){var s="<";return s+=t,typeof r!="undefined"&&e.each(r,function(e,t){t!==null&&(s+=" "+e+"='",s+=n(r,t).replace(/\'/g,"'"),s+="'")}),i===!1?s+=">":typeof i!="undefined"?(s+=">",s+=n(this,i),s+="</"+t+">"):s+=" />",s}return t.FormBuilder=function(e,t){this.name=e,this.object=t},e.extend(t.FormBuilder.prototype,{open:function(t){return r("form",e.extend({method:"post",action:"#/"+this.name+"s"},t),!1)},close:function(){return"</form>"},label:function(t,n,i){var s={"for":this._attributesForKeyPath(t).name};return r("label",e.extend(s,i),n)},hidden:function(t,n){return n=e.extend({type:"hidden"},this._attributesForKeyPath(t),n),r("input",n)},text:function(t,n){return n=e.extend({type:"text"},this._attributesForKeyPath(t),n),r("input",n)},textarea:function(t,n){var i;return n=e.extend(this._attributesForKeyPath(t),n),i=n.value,delete n.value,r("textarea",n,i)},password:function(t,n){return this.text(t,e.extend({type:"password"},n))},select:function(t,i,s){var o="",u;return s=e.extend(this._attributesForKeyPath(t),s),u=s.value,delete s.value,e.each(i,function(t,i){var s,a,f;e.isArray(i)?(s=i[1],a=i[0]):(s=i,a=i),f={value:n(this.object,s)},s===u&&(f.selected="selected"),o+=r("option",f,a)}),r("select",s,o)},radio:function(t,i,s){var o;return s=e.extend(this._attributesForKeyPath(t),s),o=s.value,s.value=n(this.object,i),o==s.value&&(s.checked="checked"),r("input",e.extend({type:"radio"},s))},checkbox:function(t,n,r){var i="";return r||(r={}),r.hidden_element!==!1&&(i+=this.hidden(t,{value:!n})),delete r.hidden_element,i+=this.radio(t,n,e.extend({type:"checkbox"},r)),i},submit:function(t){return r("input",e.extend({type:"submit"},t))},_attributesForKeyPath:function(t){var r=this,i=e.isArray(t)?t:t.split(/\./),s=r.name,o=r.object,u=r.name;return e.each(i,function(e,t){typeof o=="undefined"||o===""?o="":typeof t=="number"||t.match(/^\d+$/)?o=o[parseInt(t,10)]:o=o[t],s+="["+t+"]",u+="-"+t}),{name:s,value:n(r.object,o),"class":u}}}),t.Form=function(n){n.helpers({simple_element:r,formFor:function(n,r,i){var s;return e.isFunction(r)&&(i=r,r=this[n]),s=new t.FormBuilder(n,r),i.apply(this,[s]),s}})},t.Form});