// -- Sammy.js -- /plugins/sammy.nested_params.js
// http://sammyjs.org
// Version: 0.7.4
// Built: 2013-01-27 13:34:14 -0500
(function(e){typeof define=="function"&&define.amd?define(["jquery","sammy"],e):(window.Sammy=window.Sammy||{}).NestedParams=e(window.jQuery,window.Sammy)})(function(e,t){function n(e){return e=unescape(e),e==="true"?!0:e==="false"?!1:e}function r(t,i,s){var o,u,a;if(i.match(/^[^\[]+$/))t[i]=n(s);else if(o=i.match(/^([^\[]+)\[\](.*)$/)){u=o[1],a=o[2];if(t[u]&&!e.isArray(t[u]))throw"400 Bad Request";if(a){o=a.match(/^\[([^\]]+)\](.*)$/);if(!o)throw"400 Bad Request";t[u]?t[u][t[u].length-1][o[1]]?t[u].push(r({},o[1]+o[2],s)):e.extend(!0,t[u][t[u].length-1],r({},o[1]+o[2],s)):t[u]=[r({},o[1]+o[2],s)]}else t[u]?t[u].push(n(s)):t[u]=[n(s)]}else if(o=i.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){u=o[1],a=o[2]+o[3];if(t[u]&&e.isArray(t[u]))throw"400 Bad Request";t[u]?e.extend(!0,t[u],r(t[u],a,s)):t[u]=r({},a,s)}return t}return t.NestedParams=function(e){e._parseParamPair=r},t.NestedParams});